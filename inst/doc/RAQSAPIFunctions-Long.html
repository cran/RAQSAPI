<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Clinton Mccrowey physical scientist - US EPA" />


<title>RAQSAPI - RAQSAPI functions Long version</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>






<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">RAQSAPI - RAQSAPI functions Long version</h1>
<h4 class="author">Clinton Mccrowey physical scientist - US EPA</h4>



<div id="raqsapi-functions" class="section level1">
<h1>RAQSAPI functions</h1>
<p>The RAQSAPI library exports the following functions (in alphabetical order):</p>
<pre><code>Warning: package &#39;glue&#39; was built under R version 4.1.2</code></pre>
<pre><code>aqs_annualsummary_by_box  
aqs_annualsummary_by_cbsa  
aqs_annualsummary_by_county  
aqs_annualsummary_by_site  
aqs_annualsummary_by_state  
aqs_cbsas  
aqs_classes  
aqs_counties_by_state  
aqs_credentials  
aqs_dailysummary_by_box  
aqs_dailysummary_by_cbsa  
aqs_dailysummary_by_county  
aqs_dailysummary_by_site  
aqs_dailysummary_by_state  
aqs_fields_by_service  
aqs_isavailable  
aqs_knownissues  
aqs_mas  
aqs_monitors_by_box  
aqs_monitors_by_cbsa  
aqs_monitors_by_county  
aqs_monitors_by_site  
aqs_monitors_by_state  
aqs_parameters_by_class  
aqs_pqaos  
aqs_qa_annualPeferomanceeval_by_county  
aqs_qa_annualPeferomanceeval_by_MA  
aqs_qa_annualPeferomanceeval_by_pqao  
aqs_qa_annualPeferomanceeval_by_site  
aqs_qa_annualPeferomanceeval_by_state  
aqs_qa_annualPeferomanceevaltransaction_by_county  
aqs_qa_annualPeferomanceevaltransaction_by_MA  
aqs_qa_annualPeferomanceevaltransaction_by_pqao  
aqs_qa_annualPeferomanceevaltransaction_by_site  
aqs_qa_annualPeferomanceevaltransaction_by_state  
aqs_qa_blanks_by_county  
aqs_qa_blanks_by_MA  
aqs_qa_blanks_by_pqao  
aqs_qa_blanks_by_site  
aqs_qa_blanks_by_state  
aqs_qa_collocated_assessments_by_county  
aqs_qa_collocated_assessments_by_MA  
aqs_qa_collocated_assessments_by_pqao  
aqs_qa_collocated_assessments_by_site  
aqs_qa_collocated_assessments_by_state  
aqs_qa_flowrateaudit_by_county  
aqs_qa_flowrateaudit_by_MA  
aqs_qa_flowrateaudit_by_pqao  
aqs_qa_flowrateaudit_by_site  
aqs_qa_flowrateaudit_by_state  
aqs_qa_flowrateverification_by_county  
aqs_qa_flowrateverification_by_MA  
aqs_qa_flowrateverification_by_pqao  
aqs_qa_flowrateverification_by_site  
aqs_qa_flowrateverification_by_state  
aqs_qa_one_point_qc_by_county  
aqs_qa_one_point_qc_by_MA  
aqs_qa_one_point_qc_by_pqao  
aqs_qa_one_point_qc_by_site  
aqs_qa_one_point_qc_by_state  
aqs_qa_pep_audit_by_county  
aqs_qa_pep_audit_by_MA  
aqs_qa_pep_audit_by_pqao  
aqs_qa_pep_audit_by_site  
aqs_qa_pep_audit_by_state  
aqs_quarterlysummary_by_box  
aqs_quarterlysummary_by_county  
aqs_quarterlysummary_by_pqao  
aqs_quarterlysummary_by_site  
aqs_quarterlysummary_by_state  
aqs_removeheader  
aqs_revisionhistory  
aqs_sampledata_by_box  
aqs_sampledata_by_cbsa  
aqs_sampledata_by_county  
aqs_sampledata_by_site  
aqs_sampledata_by_state  
aqs_sampledurations  
aqs_sign_up  
aqs_sites_by_county  
aqs_states  
aqs_transactionsample_by_county  
aqs_transactionsample_by_site  
aqs_transactionsample_by_state  
aqs_transactionsample_by_MA</code></pre>
<p>RAQSAPI functions are named according to the service and filter variables that are available by the AQS Data Mart API.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
</div>
<div id="variable-descriptions-and-usage." class="section level1">
<h1>Variable descriptions and usage.</h1>
<p>These are all the available variables that can be used with various functions exported from the RAQSAPI library listed alphabetically. Not all of these variables are used with every function, and not all of these parameters are required. See the <a href="#RAQSAPI%20functional%20families">RAQSAPI functional families</a> section to see which parameters are used with each function.</p>
<ul>
<li><p>AQSobject: a R S3 object that is returned from RAQSAPI aggregate functions where return_header is TRUE. An AQS_Data_Mart_APIv2 is a 2 item named list in which the first item ($Header) is a tibble of header information from the AQS API and the second item ($Data) is a tibble of the data returned.</p></li>
<li><p>bdate: a R date object which represents the begin date of the data selection. Only data on or after this date will be returned.</p></li>
<li><p>cbdate (optional): a R date object which represents the “beginning date of last change” that indicates when the data was last updated. cbdate is used to filter data based on the change date. Only data that changed on or after this date will be returned. This is an optional variable which defaults to NA.</p></li>
<li><p>cedate (optional): a R date object which represents the “end date of last change” that indicates when the data was last updated. cedate is used to filter data based on the change date. Only data that changed on or before this date will be returned. This is an optional variable which defaults to NA.</p></li>
<li><p>countycode: a R character object which represents the 3 digit state FIPS code for the county being requested (with leading zero(s)). Refer to [aqs_counties_by_state()] for a table of available county codes for each state.</p></li>
<li><p>duration (optional): a R character string that represents the parameter duration code that limits returned data to a specific sample duration. The default value of NA_character_ will result in no filtering based on duration code. Valid durations include actual sample durations and not calculated durations such as 8 hour CO or O<span class="math inline">\({_3}\)</span> rolling averages, 3/6 day PM averages or Pb 3 month rolling averages. Refer to [aqs_sampledurations()] for a table of all available duration codes.</p></li>
<li><p>edate: a R date object which represents the end date of the data selection. Only data on or before this date will be returned.</p></li>
<li><p>email: a R character object which represents the email account that will be used to register with the AQS API or change an existing user’s key. A verification email will be sent to the account specified.</p></li>
<li><p>key: the key used in conjunction with the username given to connect to AQS Data Mart.</p></li>
<li><p>MA_code: a R character object which represents the 4 digit AQS Monitoring Agency code (with leading zeroes).</p></li>
<li><p>maxlat: a R character object which represents the maximum latitude of a geographic box. Decimal latitude with north begin positive. Only data south of this latitude will be returned.</p></li>
<li><p>maxlon: a R character object which represents the maximum longitude of a geographic box. Decimal longitude with east being positive. Only data west of this longitude will be returned. Note that -80 is less than -70.</p></li>
<li><p>minlat: a R character object which represents the minimum latitude of a geographic box. Decimal latitude with north being positive. Only data north of this latitude will be returned.</p></li>
<li><p>minlon: a R character object which represents the minimum longitude of a geographic box. Decimal longitude with east begin positive. Only data east of this longitude will be returned.</p></li>
<li><p>parameter: a R character list or single character object which represents the parameter code of the air pollutant related to the data being requested.</p></li>
<li><p>return_header If FALSE (default) only returns data requested. If TRUE returns a AQSAPI_v2 object which is a two item list that contains header information returned from the API server mostly used for debugging purposes in addition to the data requested.</p></li>
<li><p>service a string which represents the services provided by the AQS API. For a list of available services refer to <a href="https://aqs.epa.gov/aqsweb/documents/data_api.html#services" class="uri">https://aqs.epa.gov/aqsweb/documents/data_api.html#services</a> for the complete listing of services available through the Datamart API</p></li>
<li><p>sitenum: a R character object which represents the 4 digit site number (with leading zeros) within the county and state being requested.</p></li>
<li><p>stateFIPS: a R character object which represents the 2 digit state FIPS code (with leading zero) for the state being requested.</p></li>
<li><p>pqao_code: a R character object which represents the 4 digit AQS Primary Quality Assurance Organization code (with leading zeroes).</p></li>
<li><p>username: a R character object which represents the email account that will be used to connect to the AQS API.</p></li>
</ul>
<p><a name="RAQSAPI families of functions"> </a></p>
</div>
<div id="raqsapi-functional-families" class="section level1">
<h1>RAQSAPI functional families</h1>
<div id="sign-up-and-credentials" class="section level2">
<h2>Sign up and credentials</h2>
<p>The functions included in this family of functions are:</p>
<pre><code>aqs_credentials  
aqs_sign_up</code></pre>
<p>These functions are used to sign up with Data Mart and to store credential information to use with RAQSAPI. The RAQSAPI::aqs_signup function takes one parameter:</p>
<ul>
<li>email:</li>
</ul>
<p>The RAQSAPI::aqs_credentials function takes two parameters:</p>
<ul>
<li>username:</li>
<li>key:</li>
</ul>
</div>
<div id="data-mart-api-metadata-functions" class="section level2">
<h2>Data Mart API metadata functions</h2>
<pre><code>aqs_isavailable  
aqs_knownissues</code></pre>
<p>These functions return Data Mart meta data</p>
<p>The RAQSAPI::aqs_isavailable function takes no parameters and returns a table which details the status of the AQS API.</p>
<p>The RAQSAPI::aqs_field_by_Service function takes one parameter, service, which is a R character object which represents the services provided by the AQS API. For a list of available services see <a href="https://aqs.epa.gov/aqsweb/documents/data_api.html#services">Air Quality System (AQS) API - Services Overview</a></p>
<p>The RAQSAPI::aqs_knownissues function takes no parameters and Returns a table of any known issues with system functionality or the data. These are usually issues that have been identified internally and will require some time to correct in Data Mart or the API. This function implements a direct API call to Data Mart and returns data directly from the API. Issues returned via this function do not include any issues from the RAQSAPI R package.</p>
<p>The RAQSAPI::aqs_revisionhistory function is used to query Data Mart for the change history to the API.</p>
</div>
<div id="data-mart-api-list-functions" class="section level2">
<h2>Data Mart API list functions</h2>
<pre><code>aqs_cbsas  
aqs_classes  
aqs_counties_by_state  
aqs_mas  
aqs_pqaos  
aqs_sites_by_county  
aqs_states</code></pre>
<p>List functions return options or groupings that can be used in conjunction with other API calls. By default each function in this category returns results as a tibble. If return_header parameter is set to TRUE a AQSAPI_v2 object is returned instead.</p>
<p>RAQSAPI::aqs_cbsas returns a table of all available Core Based Statistical Areas (cbsas) and their respective cbsa codes.</p>
<p>RAQSAPI::aqs_states takes no arguments and returns a table of the available states and their respective state FIPS codes.</p>
<p>RAQSAPI::aqs_sampledurations takes no arguments and returns a table of the available sample duration code used to construct other requests.</p>
<p>RAQSAPI::aqs_classes takes no arguments and returns a table of parameter classes (groups of parameters, i.e. “criteria” or “all”).</p>
<p>RAQSAPI::aqs_counties_by_state takes one parameter, stateFIPS, which is a two digit state FIPS code for the state being requested represented as a R character object and returns a table of counties and their respective FIPS code for the state requested. Use RAQSAPI::aqs_states to receive a table of valid state FIPS codes.</p>
<p>RAQSAPI::aqs_sites_by_county takes two parameters, stateFIPS, which is a two digit state FIPS code for the state being requested and county_code which is a three digit county FIPS code for the county being requested, both stateFIPS and county_code should be encoded as a R character object This function returns a table of all air monitoring sites with the requested state and county FIPS code combination.</p>
<p>RAQSAPI::aqs_pqaos takes no parameters and returns an AQS_DATAMART_APIv2 S3 object containing a table of primary quality assurance organizations (pqaos).</p>
<p>RAQSAPI::aqs_mas takes no parameters and returns an AQS_DATAMART_APIv2 S3 object containing a table of monitoring agencies (MA).</p>
</div>
<div id="data-mart-aggregate-functions" class="section level2">
<h2>Data Mart aggregate functions</h2>
<table>
<colgroup>
<col width="100%" />
</colgroup>
<thead>
<tr class="header">
<th><span style="color:blue"> Information: AQS Data Mart API restricts the<br />
maximum amount of monitoring data to one full year of data per<br />
API call. These functions are able to return multiple years of data by<br />
making repeated calls to the API. Each call to the Data Mart API will take<br />
time to complete. The more years of data being requested the longer RAQSAPI<br />
will take to return the results.</span></th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<p>These functions retrieve aggregated data from the Data Mart API and are grouped by how each function aggregates the data. There are 5 different families of related aggregate functions. These families are arranged by how the Data Mart API groups the returned data, _by_site, _by_county, _by_state, <em>by</em><latitude longitude bounding box> (_by_box) and <em>by</em><core based statistical area> (_by_cbsa). Within each family of aggregated data functions there are functions that call on the 10 different services that the Data Mart API provides. All Aggregate functions return a tibble by default. If the return_Header parameter is set to TRUE an AQS_DATAMART_APIv2 S3 object is returned instead.</p>
<ul>
<li><strong>These fourteen services are</strong>:</li>
</ul>
<ol style="list-style-type: decimal">
<li><p><strong>Monitors</strong>: Returns operational information about the samplers (monitors) used to collect the data. Includes identifying information, operational dates, operating organizations, etc. Functions using this service contain <em>*monitors_by_</em>* in the function name.</p></li>
<li><p><strong>Sample Data</strong>: Returns sample data - the most fine grain data reported to EPA. Usually hourly, sometimes 5-minute, 12-hour, etc. This service is available in several geographic selections based on geography: site, county, state, cbsa (core based statistical area, a grouping of counties), or by latitude/longitude bounding box. Functions using this service contain <em>*sampledata_by_</em>* in the function name. All Sample Data functions accept two additional, optional parameters; cbdate and cedate:</p>
<ul>
<li>cbdate: a R date object which represents a “beginning date of last change” that indicates when the data was last updated. cbdate is used to filter data based on the change date. Only data that changed on or after this date will be returned. This is an optional variable which defaults to NA_Date_.</li>
<li>cedate: a R date object which represents an “end date of last change” that indicates when the data was last updated. cedate is used to filter data based on the change date. Only data that changed on or before this date will be returned. This is an optional variable which defaults to NA_Date_.</li>
<li>duration: an optional R character string that represents the parameter duration code that limits returned data to a specific sample duration. The default value of NA_character_ results in no filtering based on duration code. Valid durations include actual sample durations and not calculated durations such as 8 hour CO or <span class="math inline">\(O_3\)</span> rolling averages, 3/6 day PM averages or Pb 3 month rolling averages. Refer to [aqs_sampledurations()] for a list of all available duration codes.</li>
</ul></li>
<li><p><strong>Daily Summary Data</strong>: Returns data summarized at the daily level. All daily summaries are calculated on midnight to midnight basis in local time. Variables returned include date, mean value, maximum value, etc. Functions using this service contain <em>*dailydata_by_</em>* in the function name. All Daily Summary Data functions accept two additional parameters; cbdate and cedate:</p>
<ul>
<li>cbdate: a R date object which represents a “beginning date of last change” that indicates when the data was last updated. cbdate is used to filter data based on the change date. Only data that changed on or after this date will be returned. This is an optional variable which defaults to NA_Date_.</li>
<li>cedate: a R date object which represents an “end date of last change” that indicates when the data was last updated. cedate is used to filter data based on the change date. Only data that changed on or before this date will be returned. This is an optional variable which defaults to NA_Date_.</li>
</ul></li>
<li><p><strong>Annual Summary Data</strong>: Returns data summarized at the yearly level. Variables include mean value, maxima, percentiles, etc. Functions using this service contain <em>*annualdata_by_</em>* in the function name. All Annual Summary Data functions accept two additional parameters; cbdate and cedate:</p>
<ul>
<li>cbdate: a R date object which represents a “beginning date of last change” that indicates when the data was last updated. cbdate is used to filter data based on the change date. Only data that changed on or after this date will be returned. This is an optional variable which defaults to NA_Date_.</li>
<li>cedate: a R date object which represents an “end date of last change” that indicates when the data was last updated. cedate is used to filter data based on the change date. Only data that changed on or before this date will be returned. This is an optional variable which defaults to NA_Date_.</li>
</ul></li>
<li><p><strong>Quarterly Summary Data</strong>: Returns data summarized at the quarterly level. Variables include mean value, maxima, percentiles, etc. Functions using this service contain <em>*quarterlydata_by_</em>* in the function name. All Annual Summary Data functions accept two additional parameters; cbdate and cedate:</p>
<ul>
<li>cbdate: a R date object which represents a “beginning date of last change” that indicates when the data was last updated. cbdate is used to filter data based on the change date. Only data that changed on or after this date will be returned. This is an optional variable which defaults to NA_Date_.</li>
<li>cedate: a R date object which represents an “end date of last change” that indicates when the data was last updated. cedate is used to filter data based on the change date. Only data that changed on or before this date will be returned. This is an optional variable which defaults to NA_Date_.</li>
</ul></li>
<li><p><strong>Quality Assurance - Blanks Data</strong>: Quality assurance data - blanks samples. Blanks are unexposed sample collection devices (e.g., filters) that are transported with the exposed sample devices to assess if contamination is occurring during the transport or handling of the samples. Functions using this service contain <em>*qa_blanks_by_</em>* in the function name.<br />
</p></li>
<li><p><strong>Quality Assurance - Collocated Assessments</strong>: Quality assurance data - collocated assessments. Collocated assessments are pairs of samples collected by different samplers at the same time and place. (These are “operational” samplers, assessments with independently calibrated samplers are called “audits”.). Functions using this service contain <em>*qa_collocated_assessments_by_</em>* in the function name.</p></li>
<li><p><strong>Quality Assurance - Flow Rate Verifications</strong>: Quality assurance data - flow rate verifications. Several times per year, each PM monitor must have it’s (fixed) flow rate verified by an operator taking a measurement of the flow rate. Functions using this service contain <em>*qa_flowrateverification_by_</em>* in the function name.</p></li>
<li><p><strong>Quality Assurance - Flow Rate Audits</strong>: Quality assurance data - flow rate audits. At least twice year, each PM monitor must have it’s flow rate measurement audited by an expert using a different method than is used for flow rate verifications. Functions using this service contain <em>*qa_flowrateaudit_by_</em>* in the function name.</p></li>
<li><p><strong>Quality Assurance - One Point Quality Control Raw Data</strong>: Quality assurance data - one point quality control check raw data. At least every two weeks, certain gaseous monitors must be challenged with a known concentration to determine monitor performance. Functions using this service contain <em>*qa_one_point_qc_by_</em>* in the function name.<br />
</p></li>
<li><p><strong>Quality Assurance - pep Audits</strong>: Quality assurance data - performance evaluation program (pep) audits. pep audits are independent assessments used to estimate total measurement system bias with a primary quality assurance organization. Functions using this service contain <em>*qa_pep_audit_by_</em>* in the function name.</p></li>
<li><p><strong>Transaction Sample - AQS Submission data in transaction format (RD)</strong>: Transaction sample data - The raw transaction sample data uploaded to AQS by the agency responsible for data submissions in RD format. Functions using this service contain <em>*transactionsample_by_</em>* in the function name. Transaction sample data is only available aggregated by site, county, state or monitoring agency.</p></li>
<li><p><strong>Quality Assurance - Annual Performance Evaluations</strong>: Quality assurance data - Annual performance evaluations. A performance evaluation must be conducted on each primary monitor once per year. The percent differences between known and measured concentrations at several levels are used to assess the quality of the monitoring data. Functions using this service contain <em>*aqs_qa_annualpeferomanceeval_by_</em>* in the function name. Annual performance in transaction format are only available aggregated by site, county, state, monitoring agency, and primary quality assurance organization. Annual performance evaluations are only available aggregated by site, county, state, monitoring agency, and primary quality assurance organization.</p></li>
<li><p><strong>Quality Assurance - Annual performance Evaluations in transaction</strong><br />
<strong>format (RD)</strong>: Quality assurance data - The raw transaction annual performance evaluations data in RD format. Functions using this service contain <em>*aqs_qa_annualperformanceevaltransaction_by_</em>* in the function name. Annual performance evaluations in transaction format are only available aggregated by site, county, state, monitoring agency, and primary quality assurance organization.</p></li>
</ol>
<div id="data-mart-aggregate-functions-_by_site" class="section level3">
<h3>Data Mart aggregate functions _by_site</h3>
<pre><code>aqs_annualsummary_by_site  
aqs_dailysummary_by_site  
aqs_monitors_by_site  
aqs_qa_annualPeferomanceeval_by_site  
aqs_qa_annualPeferomanceevaltransaction_by_site  
aqs_qa_blanks_by_site  
aqs_qa_collocated_assessments_by_site  
aqs_qa_flowrateaudit_by_site  
aqs_qa_flowrateverification_by_site  
aqs_qa_one_point_qc_by_site  
aqs_qa_pep_audit_by_site  
aqs_quarterlysummary_by_site  
aqs_sampledata_by_site  
aqs_transactionsample_by_site</code></pre>
<p>functions in this family of functions aggregate data at the site level. All *_by_site functions accept the following variables:</p>
<ul>
<li>parameter:</li>
<li>bdate:</li>
<li>edate:</li>
<li>stateFIPS:</li>
<li>countycode:</li>
<li>sitenum:</li>
<li>cbdate (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>*, <em>*dailydata_by_</em>*, <em>*annualdata_by_</em>* functions and <em>*quarterlysummary_by_</em>* functions).</li>
<li>cedate (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>*, <em>*dailydata_by_</em>*, <em>*annualdata_by_</em>* functions and <em>*quarterlysummary_by_</em>* functions).</li>
<li>return_header (optional): set to FALSE by default.</li>
<li>duration (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>* functions).</li>
</ul>
</div>
<div id="data-mart-aggregate-functions-_by_county" class="section level3">
<h3>Data Mart aggregate functions _by_county</h3>
<pre><code>aqs_annualsummary_by_county  
aqs_dailysummary_by_county  
aqs_monitors_by_county  
aqs_qa_annualPeferomanceeval_by_county  
aqs_qa_annualPeferomanceevaltransaction_by_county  
aqs_qa_blanks_by_county  
aqs_qa_collocated_assessments_by_county  
aqs_qa_flowrateaudit_by_county  
aqs_qa_flowrateverification_by_county  
aqs_qa_one_point_qc_by_county  
aqs_qa_pep_audit_by_county  
aqs_quarterlysummary_by_county  
aqs_sampledata_by_county  
aqs_sites_by_county  
aqs_transactionsample_by_county</code></pre>
<p>functions in this family of functions aggregate data at the county level. All functions accept the following variables:</p>
<ul>
<li>parameter:</li>
<li>bdate:</li>
<li>edate:</li>
<li>stateFIPS:</li>
<li>countycode:</li>
<li>cbdate (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>*, <em>*dailydata_by_</em>*, <em>*annualdata_by_</em>* and <em>*quarterlysummary_by_</em>* functions).</li>
<li>cedate (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>*, <em>*dailydata_by_</em>*, <em>*annualdata_by_</em>* and <em>*quarterlysummary_by_</em>* functions).</li>
<li>return_header (optional): set to FALSE by default.</li>
<li>duration (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>* functions).</li>
</ul>
</div>
<div id="data-mart-aggregate-functions-by-monitoring-agency-ma" class="section level3">
<h3>Data Mart aggregate functions by Monitoring agency (MA)</h3>
<pre><code>aqs_annualsummary_by_state  
aqs_counties_by_state  
aqs_dailysummary_by_state  
aqs_monitors_by_state  
aqs_qa_annualPeferomanceeval_by_state  
aqs_qa_annualPeferomanceevaltransaction_by_state  
aqs_qa_blanks_by_state  
aqs_qa_collocated_assessments_by_state  
aqs_qa_flowrateaudit_by_state  
aqs_qa_flowrateverification_by_state  
aqs_qa_one_point_qc_by_state  
aqs_qa_pep_audit_by_state  
aqs_quarterlysummary_by_state  
aqs_sampledata_by_state  
aqs_transactionsample_by_state</code></pre>
<p>functions in this family of functions aggregate data at the state level. All functions accept the following variables:</p>
<ul>
<li>parameter:</li>
<li>bdate:</li>
<li>edate:</li>
<li>stateFIPS:</li>
<li>cbdate (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>*, <em>*dailydata_by_</em>*, <em>*annualdata_by_</em>* functions and <em>*quarterlysummary_by_</em>* functions).</li>
<li>cedate (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>*, <em>*dailydata_by_</em>*, <em>*annualdata_by_</em>* and <em>*quarterlysummary_by_</em>* functions).</li>
<li>return_header (optional): set to FALSE by default.</li>
<li>duration (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>* functions).</li>
</ul>
<pre><code>aqs_qa_annualPeferomanceeval_by_MA  
aqs_qa_annualPeferomanceevaltransaction_by_MA  
aqs_qa_blanks_by_MA  
aqs_qa_collocated_assessments_by_MA  
aqs_qa_flowrateaudit_by_MA  
aqs_qa_flowrateverification_by_MA  
aqs_qa_one_point_qc_by_MA  
aqs_qa_pep_audit_by_MA  
aqs_transactionsample_by_MA</code></pre>
<p>functions in this family of functions aggregate data at the Monitoring Agency (MA) level. All functions accept the following variables:</p>
<ul>
<li>parameter:</li>
<li>bdate:</li>
<li>edate:</li>
<li>MA_code:</li>
<li>cbdate (optional): (This parameter is only used in conjunction with <em>*sampledataby</em>*, <em>*dailydataby</em>*, <em>*annualdataby</em>* and <em>*quarterlysummary_by_</em>* functions).</li>
<li>cedate (optional): (This parameter is only used in conjunction with <em>*sampledataby</em>*, <em>*dailydataby</em>*, <em>*annualdataby</em>* and <em>*quarterlysummary_by_</em>* functions).</li>
<li>return_header (optional): set to FALSE by default.</li>
<li>duration (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>* functions).</li>
</ul>
</div>
<div id="data-mart-aggregate-functions-by-core-based-statistical-area-cbsa" class="section level3">
<h3>Data Mart aggregate functions by Core Based Statistical Area (cbsa)</h3>
<pre><code>aqs_annualsummary_by_cbsa  
aqs_dailysummary_by_cbsa  
aqs_monitors_by_cbsa  
aqs_sampledata_by_cbsa</code></pre>
<p>functions in this family of functions aggregate data at the Core Based Statistical Area (cbsa, as defined by the US Census Bureau) level. All functions accept the following variables:</p>
<ul>
<li>parameter:</li>
<li>bdate:</li>
<li>edate:</li>
<li>cbsa_code:</li>
<li>cbdate (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>*, <em>*dailydata_by_</em>*, <em>*annualdata_by_</em>* and <em>*quarterlysummary_by_</em>* functions).</li>
<li>cedate (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>*, <em>*dailydata_by_</em>*, <em>*annualdata_by_</em>* and <em>*quarterlysummary_by_</em>* functions).</li>
<li>return_header (optional): set to FALSE by default.</li>
<li>duration (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>* functions).</li>
</ul>
</div>
<div id="data-mart-aggregate-functions-by-primary-quality-assurance-organization-pqao" class="section level3">
<h3>Data Mart aggregate functions by Primary Quality Assurance Organization (pqao)</h3>
<pre><code>aqs_qa_annualPeferomanceeval_by_pqao  
aqs_qa_annualPeferomanceevaltransaction_by_pqao  
aqs_qa_blanks_by_pqao  
aqs_qa_collocated_assessments_by_pqao  
aqs_qa_flowrateaudit_by_pqao  
aqs_qa_flowrateverification_by_pqao  
aqs_qa_one_point_qc_by_pqao  
aqs_qa_pep_audit_by_pqao  
aqs_quarterlysummary_by_pqao</code></pre>
<p>functions in this family of functions aggregate data at the Primary Quality Assurance Organization (pqao) level. All functions accept the following variables:</p>
<ul>
<li>parameter:</li>
<li>bdate:</li>
<li>edate:</li>
<li>pqao_code:</li>
<li>return_header (optional): set to FALSE by default.</li>
</ul>
</div>
<div id="data-mart-aggregate-functions-by-latitudelongitude-bounding-box-_by_box" class="section level3">
<h3>Data Mart aggregate functions by latitude/longitude bounding box (_by_box)</h3>
<pre><code>aqs_annualsummary_by_box  
aqs_dailysummary_by_box  
aqs_monitors_by_box  
aqs_quarterlysummary_by_box  
aqs_sampledata_by_box</code></pre>
<p>Functions in this family of functions aggregate data by a latitude/longitude bounding box (_by_box) level. All functions accept the following variables:</p>
<ul>
<li>parameter:</li>
<li>bdate:</li>
<li>edate:</li>
<li>minlat:</li>
<li>minlon:</li>
<li>maxlon:</li>
<li>maxlat:</li>
<li>cbdate (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>*, <em>*dailydata_by_</em>*, <em>*annualdata_by_</em>* and <em>*quarterlysummary_by_</em>* functions).</li>
<li>cedate (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>*, <em>*dailydata_by_</em>*, <em>*annualdata_by_</em>* and <em>*quarterlysummary_by_</em>* functions).</li>
<li>return_header (optional): set to FALSE by default.</li>
<li>duration (optional): (This parameter is only used in conjunction with <em>*sampledata_by_</em>* functions).</li>
</ul>
</div>
<div id="data-mart-aggregate-functions-_by_state" class="section level3">
<h3>Data Mart aggregate functions _by_state</h3>
</div>
<div id="raqsapi-miscellaneous-functions" class="section level3">
<h3>RAQSAPI Miscellaneous functions</h3>
<pre><code>aqs_removeheader</code></pre>
<p>These are miscellaneous functions exported by RAQSAPI.</p>
<p>RAQSAPI::aqs_removeheader is the function that the RAQSAPI library uses internally to coerce an AQS_DATAMART_APIv2 S3 object into a tibble. This is useful if the user saves the output from another RAQSAPI function with return_header = TRUE set but later decides that they want just a simple tibble object. This function takes only one variable:</p>
<ul>
<li>AQSobject:</li>
</ul>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>See (<a href="https://aqs.epa.gov/aqsweb/documents/data_api.html" class="uri">https://aqs.epa.gov/aqsweb/documents/data_api.html</a>) for full details of the Data Mart API<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
